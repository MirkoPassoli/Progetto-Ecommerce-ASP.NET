<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <title>@ViewBag.Title</title>

    @Styles.Render("~/Content/css")
    @RenderSection("head", false)
</head>
<body>
    @if (ViewBag.HideNavBar == null || !ViewBag.HideNavBar)
    {
        <div class="nav-wrapper bg-light">
            <div class="container">
                <div class="navbar navbar-light row">
                    <div id="nav-brand-container" class="col-auto">
                        @Html.ActionLink("Edunet", "Index", "Home", null, new { @class = "navbar-brand mb-0 h1" })
                    </div>
                    @if (ViewBag.ShowNavBarSearch != null && ViewBag.ShowNavBarSearch)
                    {
                        <div class="col d-md-block d-none">
                            <div class="form-inline my-2 my-lg-0 row">
                                <input id="search-input" class="form-control col" type="search" placeholder="Cosa stai cercando?" aria-label="Cosa stai cercando?">
                            </div>
                        </div>
                    }
                    <div class="col-auto">
                        @if (ViewBag.ShowNavBarSearch != null && ViewBag.ShowNavBarSearch)
                        {
                            <button id="search-button" class="btn btn-outline-dark my-2 col-auto nav-search" type="submit"><i class="material-icons">search</i></button>
                        }

                        @if (ViewBag.ShowNavBarLogin != null && ViewBag.ShowNavBarLogin)
                        {
                            var user = Ecommerce.Utils.SessionContext.GetUserData();
                            if ((ViewContext.RouteData.Values["Action"].ToString() != "Index" || ViewContext.RouteData.Values["Controller"].ToString() != "Login") && user == null)
                            {
                                <a class="nav-link d-inline-block h6" href="@Url.Action("Index", "Login")">Login</a>
                            }
                            else if (user != null)
                            {
                                <a class="nav-link d-inline-block h6" href="@Url.Action("Index", "Utente")">Ciao @user.Name</a>
                            }
                        }

                        @if (ViewBag.ShowNavBarCustom != null && ViewBag.ShowNavBarCustom)
                        {
                            @Html.Raw(ViewBag.ShowNavBarCustom)
                        }
                    </div>
                </div>
            </div>
        </div>
    }

    <div class="container page">
        @RenderBody()
    </div>

    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/bootstrap")

    @RenderSection("scripts", false)

    @if (ViewBag.ShowNavBarSearch != null && ViewBag.ShowNavBarSearch)
    {
        <script>
            $(document).ready(() => {

                $('#search-button').click(searchClick)

                function searchClick() {
                    let win = $(window);
                    let input = $('#search-input');
                    if (win.width() < 768 && input.val().length == 0) {
                        $('#nav-brand-container').removeClass('col-auto').addClass('col-12');
                    }
                    if (input.val().length > 0) location = '/Cerca/' + encodeURIComponent(input.val());
                }
            });
        </script>
    }
    @*
        <div style="margin: 0px;
          padding: 0px;
          min-height: 100%;
          height: 100%;">
            <footer class="container py-5">
                <div class="row">
                    <div class="col-12 col-md">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="d-block mb-2"><circle cx="12" cy="12" r="10"></circle><line x1="14.31" y1="8" x2="20.05" y2="17.94"></line><line x1="9.69" y1="8" x2="21.17" y2="8"></line><line x1="7.38" y1="12" x2="13.12" y2="2.06"></line><line x1="9.69" y1="16" x2="3.95" y2="6.06"></line><line x1="14.31" y1="16" x2="2.83" y2="16"></line><line x1="16.62" y1="12" x2="10.88" y2="21.94"></line></svg>
                        <small class="d-block mb-3 text-muted">© 2018-2019</small>
                    </div>
                    <div class="col-6 col-md">
                        <h5>Edunet</h5>
                        <ul class="list-unstyled text-small">
                            <li><a class="text-muted" href="#">Cerca</a></li>
                            <li><a class="text-muted" href="#">Carrello</a></li>
                            <li><a class="text-muted" href="#">Profilo</a></li>
                            <li><a class="text-muted" href="#">Pagamento</a></li>
                        </ul>
                    </div>
                    <div>
                       <img />
                    </div>
                 @*            <div class="col-6 col-md">
                        <h5>Resources</h5>
                        <ul class="list-unstyled text-small">
                            <li><a class="text-muted" href="#">Business</a></li>
                            <li><a class="text-muted" href="#">Education</a></li>
                            <li><a class="text-muted" href="#">Government</a></li>
                            <li><a class="text-muted" href="#">Gaming</a></li>
                        </ul>
                    </div>
                    <div class="col-6 col-md">
                        <h5>About</h5>
                        <ul class="list-unstyled text-small">
                            <li><a class="text-muted" href="#">Team</a></li>
                            <li><a class="text-muted" href="#">Locations</a></li>
                            <li><a class="text-muted" href="#">Privacy</a></li>
                            <li><a class="text-muted" href="#">Terms</a></li>
                        </ul>
                    </div>
                </div>
            </footer>
        </div>
    *@
</body>
</html>